<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ç‰›è‚‰é£Ÿè°±è½¬ç›˜</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
      background: #f7f7f7;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .app {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      padding: 24px 24px 32px;
      max-width: 480px;
      width: 100%;
      text-align: center;
    }
    .title {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .subtitle {
      font-size: 13px;
      color: #888;
      margin-bottom: 24px;
    }

    .wheel-container {
      position: relative;
      width: 280px;
      height: 280px;
      margin: 0 auto 24px;
    }

    .wheel {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      position: relative;
      transition: transform 3s ease-out;
    }

    .wheel-center {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: #ffffff;
      box-shadow: 0 0 0 4px #ffb3b3;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #ff4d4f;
      z-index: 3;
    }

    .pointer {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 16px solid transparent;
      border-right: 16px solid transparent;
      border-bottom: 30px solid #ff4d4f;
      z-index: 4;
    }

    .btn {
      width: 100%;
      padding: 11px 0;
      border-radius: 999px;
      border: none;
      font-size: 16px;
      background: linear-gradient(135deg,#ff7875,#ff4d4f);
      color: #fff;
      cursor: pointer;
      transition: opacity .2s, transform .1s;
    }
    .btn:active { transform: scale(0.97); }
    .btn:disabled { opacity: .6; cursor: default; }

    .result {
      margin-top: 18px;
      font-size: 16px;
      font-weight: 500;
    }
    .result span { color: #ff4d4f; }

    .tip {
      margin-top: 10px;
      font-size: 12px;
      color: #999;
      line-height: 1.5;
      text-align: left;
    }
    .dish-list {
      margin-top: 8px;
      font-size: 12px;
      color: #666;
      max-height: 120px;
      overflow-y: auto;
      text-align: left;
    }
    .dish-list li {
      list-style: disc;
      margin-left: 18px;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="title">ç‰›è‚‰é£Ÿè°±è½¬ç›˜</div>
    <div class="subtitle">è®©è½¬ç›˜å¸®ä½ å†³å®šä»Šå¤©åƒå“ªé“ç‰›è‚‰ ğŸ¥©</div>

    <div class="wheel-container">
      <div class="wheel" id="wheel">
        <div class="wheel-center">å¼€è½¬ï¼</div>
      </div>
      <div class="pointer"></div>
    </div>

    <button class="btn" id="spinBtn">å¼€å§‹è½¬ç›˜</button>

    <div class="result" id="result"></div>

    <div class="tip">
      å½“å‰å‚ä¸æŠ½å–çš„èœï¼š
      <ul class="dish-list" id="dishList"></ul>
    </div>
  </div>

  <script>
    // âœ… è¿™é‡Œå°±æ˜¯ä½ çš„ç‰›è‚‰èœå•ï¼ˆå¯ä»¥éšæ—¶å¢åˆ æ”¹ï¼‰
    const dishes = [
      "é’æ¤’ç‚’ç‰›è‚‰ä¸",
      "å­œç„¶ç‰›è‚‰",
      "é»‘æ¤’ç‰›æŸ³",
      "è’œè‹”ç‚’ç‰›è‚‰",
      "èŠ¹èœç‚’ç‰›è‚‰",
      "å’–å–±åœŸè±†ç‰›è‚‰ç²’",
      "å‡‰æ‹Œç‰›è‚‰ç‰‡",
      "çº¢çƒ§ç‰›è‚‰",
      "åœŸè±†çº¢çƒ§ç‰›è…©",
      "èåœç‚–ç‰›è…©",
      "å•¤é…’ç‚–ç‰›è‚‰",
      "ç•ªèŒ„ç‚–ç‰›è…©",
      "é¦™è¾£å¹²é”…ç‰›è‚‰",
      "é…±ç‰›è‚‰ / å¤ç‰›è‚‰",
      "ç‰›è‚‰èåœæ±¤",
      "ç•ªèŒ„ç‰›è…©æ±¤",
      "é…¸èœç‰›è‚‰ç²‰ä¸æ±¤",
      "å…°å·ç‰›è‚‰é¢é£å‘³",
      "ç…ç‰›æ’",
      "ç‰›è‚‰æ±‰å ¡é¥¼",
      "ç‰›è‚‰è”¬èœæ²™æ‹‰",
      "ç‰›è‚‰å·èœ / ç”ŸèœåŒ…ç‰›è‚‰",
      "ç‰›è‚‰æ„å¤§åˆ©é¢"
    ];

    const wheel = document.getElementById("wheel");
    const spinBtn = document.getElementById("spinBtn");
    const resultEl = document.getElementById("result");
    const dishListEl = document.getElementById("dishList");

    // æŠŠèœåå±•ç¤ºåœ¨ä¸‹æ–¹åˆ—è¡¨
    dishes.forEach(dish => {
      const li = document.createElement("li");
      li.textContent = dish;
      dishListEl.appendChild(li);
    });

    const len = dishes.length;
    const anglePer = 360 / len;

    // ç”¨ conic-gradient åŠ¨æ€ç”Ÿæˆå½©è‰²æ‰‡åŒº
    const colors = ["#ffe6e6", "#e6f4ff"]; // ä¸¤ä¸ªé¢œè‰²äº¤æ›¿
    let gradientParts = [];
    for (let i = 0; i < len; i++) {
      const start = i * anglePer;
      const end = (i + 1) * anglePer;
      const color = colors[i % colors.length];
      gradientParts.push(`${color} ${start}deg ${end}deg`);
    }
    wheel.style.background = `conic-gradient(${gradientParts.join(",")})`;

    let isSpinning = false;
    let currentAngle = 0;

    spinBtn.addEventListener("click", () => {
      if (isSpinning) return;
      isSpinning = true;
      spinBtn.disabled = true;
      resultEl.textContent = "";

      // è½¬ 5~7 åœˆï¼Œå†åŠ ä¸€ç‚¹éšæœºè§’åº¦
      const rounds = 5 + Math.floor(Math.random() * 3); // 5~7åœˆ
      const extra = Math.random() * 360;                // 0~360 éšæœºè§’åº¦
      const targetAngle = currentAngle + rounds * 360 + extra;

      wheel.style.transition = "transform 3s ease-out";
      wheel.style.transform = `rotate(${targetAngle}deg)`;

      // è®°å½•å½“å‰è§’åº¦ï¼ˆå‹ç¼©åˆ° 0~360ï¼‰
      currentAngle = targetAngle % 360;

      setTimeout(() => {
        // è®¡ç®—æŒ‡é’ˆè½åœ¨å“ªä¸ªæ‰‡åŒº
        const theta = (targetAngle % 360 + 360) % 360; // 0~360
        // æŒ‡é’ˆåœ¨â€œæ­£ä¸Šæ–¹â€90Â°ï¼Œåæ¨å›è½¬ç›˜æœ¬èº«çš„è§’åº¦
        const pointerAngleOnWheel = (90 - theta + 360) % 360;
        let index = Math.floor(pointerAngleOnWheel / anglePer);
        if (index < 0) index = 0;
        if (index >= len) index = len - 1;

        const dish = dishes[index];
        resultEl.innerHTML = `ä»Šå¤©å°±åƒï¼š<span>${dish}</span>`;

        isSpinning = false;
        spinBtn.disabled = false;
      }, 3100);
    });
  </script>
</body>
</html>
